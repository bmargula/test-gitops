cluster:
  name: aks-zeiss-lab

externalServices:
  tempo:
    host: tempo-distributor.monitoring.svc.cluster.local
    port: 4317
    protocol: grpc
  mimir:
    host: mimir-gateway.monitoring.svc.cluster.local
    port: 80
    protocol: http
  loki:
    host: loki-gateway.monitoring.svc.cluster.local
    port: 80
    protocol: loki

destinations:
  - name: loki
    type: loki
    url: http://loki-gateway.monitoring.svc.cluster.local/loki/api/v1/push
  - name: mimir
    type: prometheus
    url: http://mimir-gateway.monitoring.svc.cluster.local/api/v1/push

  # Tempo Destination (Wichtig!)
  - name: tempo
    type: otlp
    url: http://tempo-distributor.monitoring.svc.cluster.local:4317
    protocol: grpc

# --- FEATURES ---
podLogs:
  enabled: true
clusterEvents:
  enabled: true

# Metrics Fix
clusterMetrics:
  enabled: true
  kubelet:
    enabled: true
    client:
      tls:
        insecureSkipVerify: true
  cadvisor:
    enabled: true
    client:
      tls:
        insecureSkipVerify: true
  kube-state-metrics:
    podAnnotations:
      kubernetes.azure.com/set-kube-service-host-fqdn: "true"

# TRACING CONFIG
traces:
  enabled: true # Das Chart baut automatisch die Pipeline: Receiver -> Batch -> Tempo

applicationObservability:
  enabled: true # Erstellt den Service und Ã¶ffnet Ports 4317/4318
  receivers:
    otlp:
      grpc:
        enabled: true
      http:
        enabled: true

# --- COLLECTORS ---
alloy-singleton:
  enabled: true
  controller:
    podAnnotations:
      kubernetes.azure.com/set-kube-service-host-fqdn: "true"

alloy-logs:
  enabled: true
  controller:
    podAnnotations:
      kubernetes.azure.com/set-kube-service-host-fqdn: "true"

alloy-metrics:
  enabled: true
  controller:
    podAnnotations:
      kubernetes.azure.com/set-kube-service-host-fqdn: "true"

alloy-receiver:
  enabled: true
  controller:
    podAnnotations:
      kubernetes.azure.com/set-kube-service-host-fqdn: "true"
